window.__require=function t(e,o,n){function c(i,a){if(!o[i]){if(!e[i]){var s=i.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return c(e[i][1][t]||t)},l,l.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)c(n[i]);return c}({DogControl:[function(t,e,o){"use strict";cc._RF.push(e,"9c297Bckb5BZaHaKEeCyg0V","DogControl");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameManagerNode=null,e.isPouncing=!1,e}return c(e,t),e.prototype.update=function(t){0==this.isPouncing&&(this.node.x+=150*t,this.node.x>=0&&this.pounce())},e.prototype.pounce=function(){var t=this;this.isPouncing=!0;var e=this.node.getComponent(cc.Animation);e.stop("dogwalk"),e.play("pounce"),e.once("finished",function(){var e=cc.fadeOut(.5),o=cc.callFunc(function(){cc.log("\u52a8\u753b\u5b8c\u6210\uff0c\u6e38\u620f\u542f\u52a8"),t.gameManagerNode.emit("startGame"),t.node.active=!1});t.node.runAction(cc.sequence(e,o))})},e.prototype.laugh=function(){var t=this;this.node.active=!0,this.node.opacity=255;var e=this.node.getComponent(cc.Animation);e.play("laugh"),this.scheduleOnce(function(){e.stop("laugh"),t.node.active=!1},2)},e.prototype.caughtDuck=function(){var t=this;this.node.active=!0,this.node.opacity=255;var e=this.node.getComponent(cc.Animation);e.play("caughtDuck"),this.scheduleOnce(function(){e.stop("caughtDuck"),t.node.active=!1},2)},r([s(cc.Node)],e.prototype,"gameManagerNode",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],DuckControl:[function(t,e,o){"use strict";cc._RF.push(e,"a5371xMrRVPyYmFjcZkEgmk","DuckControl");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flySpeed=150,e}return c(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onDuckClicked,this)},e.prototype.fly=function(){var t=this,e=cc.moveTo(5,cc.winSize.width/2,this.node.y),o=cc.callFunc(function(){cc.find("Canvas/GameManager").getComponent("GameControl").loseLife(),cc.find("Canvas/Dog").getComponent("DogControl").laugh(),t.node.destroy()});this.node.runAction(cc.sequence(e,o))},e.prototype.onDuckClicked=function(){var t=this,e=this.node.getComponent(cc.Animation);this.node.stopAllActions(),e.play("duckdown"),cc.find("Canvas/GameManager").getComponent("GameControl").addscore(10),cc.tween(this.node).to(.5,{x:this.node.x,y:-500}).call(function(){t.node.destroy()}).start()},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onDuckClicked,this)},r([s],e.prototype,"flySpeed",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],GameControl:[function(t,e,o){"use strict";cc._RF.push(e,"79f0cQpMD5JnL9nCIznew7s","GameControl");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dog=null,e.RoundTip=null,e.RoundOver=null,e.duckPrefab=null,e.aim=null,e.label=null,e.txt=null,e.isGameRunning=!1,e.currentRound=1,e.liver=3,e.roundTargetScore=40,e}return c(e,t),e.prototype.onLoad=function(){var t=this;this.node.on("startGame",this.startGame,this),cc.find("Canvas").on(cc.Node.EventType.MOUSE_MOVE,function(e){var o=e.getLocation(),n=t.aim.parent.convertToNodeSpaceAR(o);t.aim.setPosition(n)})},e.prototype.start=function(){this.txt.active=!1,this.aim.active=!1,this.currentRound=1},e.prototype.startGame=function(){var t=this;cc.log("\u5f00\u59cb\u7b2c"+this.currentRound+"\u56de\u5408"),this.liver=3,this.label.string="0",this.isGameRunning=!0,this.aim.active=!0,this.showRoundTip(function(){t.scheduleOnce(t.spawnDuck,2)})},e.prototype.showRoundOver=function(){var t=cc.instantiate(this.RoundOver);cc.find("Canvas").addChild(t),t.getChildByName("jieshu").getComponent(cc.Label).string="you won! ",t.setScale(.5),t.opacity=0,cc.tween(t).to(.5,{opacity:255,scale:1.5},{easing:"cubicOut"}).delay(1).to(.5,{opacity:0,scale:.5},{easing:"cubicIn"}).call(function(){t.destroy(),cc.log("\u63d0\u793a\u6846\u5df2\u9500\u6bc1")}).start()},e.prototype.showRoundTip=function(t){var e=cc.instantiate(this.RoundTip);cc.find("Canvas").addChild(e),e.getChildByName("kaishi").getComponent(cc.Label).string="ROUND "+this.currentRound,e.setScale(.5),e.opacity=0,cc.tween(e).to(.5,{opacity:255,scale:1.5},{easing:"cubicOut"}).delay(1).to(.5,{opacity:0,scale:.5},{easing:"cubicIn"}).call(function(){e.destroy(),cc.log("\u63d0\u793a\u6846\u5df2\u9500\u6bc1"),t&&(t(),cc.log("\u63d0\u793a\u6846\u56de\u8c03\u6267\u884c\uff0c\u5f00\u59cb\u8c03\u5ea6\u751f\u6210\u9e2d\u5b50"))}).start()},e.prototype.spawnDuck=function(){var t=this;cc.log("\u5f00\u59cb\u751f\u6210\u9e2d\u5b50"),this.schedule(function(){if(t.isGameRunning){var e=cc.instantiate(t.duckPrefab);e.setPosition(-cc.winSize.width/2,500*Math.random()-200),t.node.parent.addChild(e),e.getComponent("DuckControl").fly()}},2)},e.prototype.addscore=function(t){if(this.isGameRunning){var e=Number(this.label.string)+t;this.label.string=e.toString(),cc.log("\u5f53\u524d\u5206\u6570\uff1a"+e),Number(this.label.string)%20==0&&(cc.log(Number(this.label.string)),cc.find("Canvas/Dog").getComponent("DogControl").caughtDuck()),e>=this.roundTargetScore&&this.endCurrentRound()}},e.prototype.endCurrentRound=function(){var t=this;this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.clearAllDucks(),t.showRoundOver()},2),this.scheduleOnce(function(){t.nextRound(),cc.log("\u5df2\u901a\u8fc7\u7b2c"+t.currentRound+"\u5173")},4)},e.prototype.clearAllDucks=function(){var t=this.node.parent;t&&t.getComponentsInChildren("DuckControl").forEach(function(t){t&&t.node&&!t.node.destroyed&&(t.node.stopAllActions(),t.node.destroy())})},e.prototype.loseLife=function(){this.liver--,cc.log("\u751f\u547d\u503c\uff1a"+this.liver),this.liver<=0&&this.GameOver()},e.prototype.nextRound=function(){this.currentRound++,this.roundTargetScore+=20,this.startGame()},e.prototype.GameOver=function(){cc.log("\u6e38\u620f\u7ed3\u675f"),this.txt.active=!0,cc.tween(this.txt).to(2,{scale:3},{easing:"cubicOut"}).delay(1).start(),this.isGameRunning=!1,this.aim.active=!1,this.unscheduleAllCallbacks(),this.clearAllDucks(),this.label.string="0",this.scheduleOnce(function(){cc.director.loadScene("start")},4)},r([s(cc.Node)],e.prototype,"dog",void 0),r([s(cc.Prefab)],e.prototype,"RoundTip",void 0),r([s(cc.Prefab)],e.prototype,"RoundOver",void 0),r([s(cc.Prefab)],e.prototype,"duckPrefab",void 0),r([s(cc.Node)],e.prototype,"aim",void 0),r([s(cc.Label)],e.prototype,"label",void 0),r([s(cc.Node)],e.prototype,"txt",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],StartGameControl:[function(t,e,o){"use strict";cc._RF.push(e,"a62f2Mi6UFJRqC7i5T4acJq","StartGameControl");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.startGame=function(){cc.director.loadScene("game")},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["DogControl","DuckControl","GameControl","StartGameControl"]);